description: "Dictionary rename operations"
current:
  databases:
    analytics:
      engine: "Atomic"
      comment: "Analytics database"
      on_cluster: ""
  dictionaries:
    old_users_dict:
      database: "analytics"
      comment: "User dictionary"
      on_cluster: ""
      sql: |
        CREATE DICTIONARY analytics.old_users_dict (
          id UInt64,
          name String
        ) PRIMARY KEY id
        SOURCE(HTTP(url 'http://api.example.com/users'))
        LAYOUT(HASHED())
        LIFETIME(3600)
        COMMENT 'User dictionary';

target:
  databases:
    analytics:
      engine: "Atomic"
      comment: "Analytics database"
      on_cluster: ""
  dictionaries:
    users_dict:
      database: "analytics"
      comment: "User dictionary"
      on_cluster: ""
      sql: |
        CREATE DICTIONARY analytics.users_dict (
          id UInt64,
          name String
        ) PRIMARY KEY id
        SOURCE(HTTP(url 'http://api.example.com/users'))
        LAYOUT(HASHED())
        LIFETIME(3600)
        COMMENT 'User dictionary';

expected_diffs:
  - type: "RENAME"
    dictionary_name: "analytics.old_users_dict"
    new_dictionary_name: "analytics.users_dict"
    description: "Rename dictionary 'analytics.old_users_dict' to 'analytics.users_dict'"
    up_sql: "RENAME DICTIONARY analytics.old_users_dict TO analytics.users_dict;"
    down_sql: "RENAME DICTIONARY analytics.users_dict TO analytics.old_users_dict;"