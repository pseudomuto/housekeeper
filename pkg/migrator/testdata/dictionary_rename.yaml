description: "Dictionary rename operations with intelligent detection"
current_sql: |
  CREATE DATABASE analytics ENGINE = Atomic COMMENT 'Analytics database';
  CREATE DICTIONARY analytics.old_users_dict (
    id UInt64,
    name String
  ) PRIMARY KEY id
  SOURCE(HTTP(url 'http://api.example.com/users'))
  LAYOUT(HASHED())
  LIFETIME(3600)
  COMMENT 'User dictionary';
target_sql: |
  CREATE DATABASE analytics ENGINE = Atomic COMMENT 'Analytics database';
  CREATE DICTIONARY analytics.users_dict (
    id UInt64,
    name String
  ) PRIMARY KEY id
  SOURCE(HTTP(url 'http://api.example.com/users'))
  LAYOUT(HASHED())
  LIFETIME(3600)
  COMMENT 'User dictionary';
expected_migration:
  sql_contains:
    - "RENAME DICTIONARY analytics.old_users_dict TO analytics.users_dict"
  diff_count: 1
  diff_types:
    - "RENAME"