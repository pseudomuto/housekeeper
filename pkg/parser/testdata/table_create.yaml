tables:
    - name: users
      operation: CREATE
      engine: MergeTree
      columns:
        - name: id
          data_type: UInt64
        - name: name
          data_type: String
        - name: email
          data_type: String
      order_by: expression
    - name: events
      database: analytics
      cluster: production
      operation: CREATE
      or_replace: true
      if_not_exists: true
      engine: ReplicatedMergeTree('/clickhouse/tables/{shard}/events', '{replica}')
      comment: User events table
      columns:
        - name: id
          data_type: UInt64
        - name: user_id
          data_type: UInt64
        - name: event_type
          data_type: LowCardinality(String)
        - name: timestamp
          data_type: DateTime
          default: DEFAULT expression
        - name: data
          data_type: Map(String, String)
          default: DEFAULT expression
        - name: metadata
          data_type: Nullable(String)
          codec: CODEC(ZSTD)
        - name: tags
          data_type: Array(String)
          default: DEFAULT expression
        - name: location
          data_type: Tuple(lat Float64, lon Float64)
        - name: settings
          data_type: Nested(key String, value String)
        - name: temp_data
          data_type: String
          ttl: expression
          comment: Temporary data
      order_by: expression
      partition_by: expression
      primary_key: expression
      sample_by: expression
      ttl: expression
      settings:
        index_granularity: "8192"
        merge_with_ttl_timeout: "3600"
    - name: logs
      operation: CREATE
      engine: Log
      columns:
        - name: timestamp
          data_type: DateTime
        - name: level
          data_type: String
        - name: message
          data_type: String
    - name: user_profiles
      operation: CREATE
      engine: MergeTree
      columns:
        - name: user_id
          data_type: UInt64
        - name: profile_data
          data_type: Map(String, Nullable(String))
        - name: tags
          data_type: Array(LowCardinality(String))
        - name: coordinates
          data_type: Nullable(Tuple(lat Float64, lon Float64))
        - name: computed_field
          data_type: String
        - name: age_alias
          data_type: UInt8
        - name: default_data
          data_type: String
      order_by: expression
      partition_by: expression
    - name: measurements
      operation: CREATE
      engine: MergeTree
      columns:
        - name: id
          data_type: UInt64
        - name: device_id
          data_type: FixedString(16)
        - name: value
          data_type: Decimal(10, 4)
        - name: precision_value
          data_type: Decimal128(6)
        - name: created_at
          data_type: DateTime64(3, 'UTC')
        - name: config_data
          data_type: String
          codec: CODEC(LZ4HC(9))
      order_by: expression
    - name: '`order-table`'
      database: '`user-db`'
      operation: CREATE
      engine: MergeTree
      columns:
        - name: '`user-id`'
          data_type: UInt64
        - name: '`order-id`'
          data_type: String
        - name: '`order-date`'
          data_type: Date
        - name: '`select`'
          data_type: String
        - name: '`group`'
          data_type: LowCardinality(String)
      order_by: expression
    - name: '`user-events`'
      database: '`analytics-db`'
      cluster: '`prod-cluster`'
      operation: CREATE
      if_not_exists: true
      engine: ReplicatedMergeTree('/clickhouse/tables/{shard}/user-events', '{replica}')
      columns:
        - name: id
          data_type: UInt64
        - name: '`user-name`'
          data_type: String
        - name: event_type
          data_type: String
        - name: '`created-at`'
          data_type: DateTime
          default: DEFAULT expression
      order_by: expression
    - name: search_logs
      operation: CREATE
      engine: MergeTree
      columns:
        - name: id
          data_type: UInt64
        - name: query
          data_type: String
        - name: user_id
          data_type: UInt64
        - name: timestamp
          data_type: DateTime
        - name: category
          data_type: LowCardinality(String)
        - name: response_time
          data_type: Float32
      order_by: expression
      partition_by: expression
    - name: user_profiles
      operation: CREATE
      engine: MergeTree
      columns:
        - name: user_id
          data_type: UInt64
        - name: email
          data_type: String
        - name: age
          data_type: UInt8
        - name: profile_data
          data_type: Map(String, String)
        - name: created_at
          data_type: DateTime
          default: DEFAULT expression
        - name: updated_at
          data_type: DateTime
          default: DEFAULT expression
      order_by: expression
    - name: test_projections
      operation: CREATE
      engine: MergeTree
      columns:
        - name: id
          data_type: UInt64
        - name: name
          data_type: String
        - name: timestamp
          data_type: DateTime
      order_by: expression
    - name: analytics_data
      operation: CREATE
      engine: MergeTree
      columns:
        - name: user_id
          data_type: UInt64
        - name: event_type
          data_type: String
        - name: timestamp
          data_type: DateTime
        - name: revenue
          data_type: Decimal(10, 2)
      order_by: expression
    - name: complex_table
      operation: CREATE
      engine: MergeTree
      columns:
        - name: id
          data_type: UInt64
        - name: name
          data_type: String
        - name: category
          data_type: String
        - name: value
          data_type: Float64
        - name: created_at
          data_type: DateTime
      order_by: expression
